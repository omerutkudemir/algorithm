#include <stdio.h>
#include <stdlib.h>
#include <string.h>
struct hisseler{
	
	char hisse_adi[10];
	float hisse_fiyati;
	int tavan,tavan_bozma;

};

struct uzun_vade{
	char hisse_adi[10];
	float hisse_fiyati;
	
};


int main(){
	
	
	
	int islem;
	printf("kisa vadeli halka arz hesabi icin 1 \nuzun vadeli hisse alicaksaniz 2 yi tuslayip enter'e basiniz: \n");
	scanf("%d",&islem);
	
	if(islem==1)
	{
		int kac_hisse,i,j;
		
	    
		printf("kac tane hisse icin hesap yapicaksiniz :");
		scanf("%d",&kac_hisse);
		struct hisseler bilgiler[kac_hisse];
		float ilk_fiyat[kac_hisse],kar;
		char hisse_ismi[10];
		float son_fiyat[kac_hisse];
		for(i=0;i<kac_hisse;i++)
		{
			
			char cekme;
			while (getchar() != '\n');
			printf("%d. hissenin adini giriniz: ",i+1);
			scanf("%s",hisse_ismi);
			strcpy(bilgiler[i].hisse_adi,hisse_ismi);
			
			printf("\n");
			
			printf("%s isimli hisseden kaç TL aldiniz: ",hisse_ismi);
			scanf("%f",&bilgiler[i].hisse_fiyati);
			ilk_fiyat[i]=bilgiler[i].hisse_fiyati;
			printf("\n");
			while (getchar() != '\n');
			printf("%s halka arzi kac gun arka arkaya tavan gider: ",hisse_ismi);
			scanf("%d",&bilgiler[i].tavan);
			
			printf("\n");
			
			printf("parayi tavan bozdugunda cekicekmisiniz ? (e/h):");
			while (getchar() != '\n');
			scanf("%c",&cekme);
			
			if(cekme=='e')
			{
				for(j=0;j<bilgiler[i].tavan;j++)
				{
					bilgiler[i].hisse_fiyati=bilgiler[i].hisse_fiyati+(bilgiler[i].hisse_fiyati/10.0);
				}
				
				son_fiyat[i]=bilgiler[i].hisse_fiyati;
				kar=son_fiyat[i]-ilk_fiyat[i];
				printf("giris paran: %.2f\n",ilk_fiyat[i]);
				printf("\nele gelen para: %.2f\n",son_fiyat[i]);
				printf("kar :%.2f\n",kar);
				printf("kar yuzdesi : %%%.2f",(kar*100)/ilk_fiyat[i]);
				
			}
			else if(cekme=='h')
			{
				
				
				printf("\n\n******/tavan bozma durumnda reaksiyonunuz********\n\n");
				printf("tavan vozma durumunun kac gun devam etmesini ongoruyorsunuz? : ");
				scanf("%d",&bilgiler[i].tavan_bozma);
				printf("dusus hseaplandi\n\n");
				
				for(j=0;j<bilgiler[i].tavan;j++)
				{
					bilgiler[i].hisse_fiyati=bilgiler[i].hisse_fiyati+(bilgiler[i].hisse_fiyati/10.0);
				}
				
				for(j=0;j<bilgiler[i].tavan_bozma;j++)
				{
						bilgiler[i].hisse_fiyati=bilgiler[i].hisse_fiyati-(bilgiler[i].hisse_fiyati/10.0);
				}
				printf("%d gun tavan yapip %d gun tavan bozan hissenizin size donusu: %.2f",bilgiler[i].tavan,bilgiler[i].tavan_bozma,bilgiler[i].hisse_fiyati);
				
				
			}
			
		}
		
	    
	    char dosya_yolu[100];
	    
	    
		
	    float kar1;
		while (1) {
			
			
		    printf("\n\nPortfoy dosyanizin kaydedilecegi dosya yolunu giriniz \n");
		    printf("ornek dosya yolu: C:/Users/LENOVO/portfoy_belgesi.txt kendi bigisayaraınıza gore giriniz: ");
		    scanf("%s", dosya_yolu);
		    
		    FILE *dosya = fopen(dosya_yolu, "w");
		    if (dosya == NULL) {
		        printf("Dosya olusturulamadi. Lutfen gecerli bir dosya yolunu girin.\n");
		    } else {
		        for (i = 0; i < kac_hisse; i++) {
		        	kar1=son_fiyat[i]-ilk_fiyat[i];
		        	
		            fprintf(dosya, "%s net: %.2f , kar: %.2f , kar yuzdesi: %%%.2f \n\n",bilgiler[i].hisse_adi,son_fiyat[i] ,kar,(kar1*100)/ilk_fiyat[i]);
		        }
		        printf("Portfoy dosyaniz %s yoluna kaydedildi.\n", dosya_yolu);
		        fclose(dosya);
		        break; 
		    }
}
			
		
	
}
else if(islem==2)
{
	
	int i,j,kac_tane;
	printf("kac tane hisse alicaksiniz: ");
	scanf("%d",&kac_tane);
	struct uzun_vade yatirim[kac_tane];
	
	
	float ilkfiyat[kac_tane],sonfiyat[kac_tane];
	
	
	
	
	printf("hisselerininizin adini girip enter'e basiniz(dosyaya kaydetmek icin gereklidir)\n\n");
	
	for(i=0;i<kac_tane;i++)
	{
		
	    printf("%d. hissenin adi:",i+1);
	    scanf("%s",yatirim[i].hisse_adi);
	}
	
	printf("ilk alsinizda her birinden kac TL alicaksiniz sira ile giriniz: \n");
	
	for(i=0;i<kac_tane;i++)
	{
		printf("%s :",yatirim[i].hisse_adi);
		scanf("%f",&yatirim[i].hisse_fiyati);
		ilkfiyat[i]=yatirim[i].hisse_fiyati;
	}
	
	
	int islemm;
	int yukselis[kac_tane];
	int zaman[kac_tane];
    float netkar;
	
	
while(1)
{
	printf("hisselerinizin ne kadar zaman icinde ne kadar kar edecegini belirleceksiniz\n\n");
	printf("  hesaplamak icin zaman dilimi seciniz: \n");
	printf("	haftalik icin 1 e \n	aylik icin 2 ye \n	  yillik  icin 3 e basiniz:\n");
	scanf("%d",&islemm);
	if(islemm==1)
	{
		
		
		for(i=0;i<kac_tane;i++)
		{
			printf("%s isimli hisseyi kac hafta  elinizdde tutacaksiniz: ",yatirim[i].hisse_adi);
			scanf("%d",&zaman[i]);
			printf("\n\n %s isimli hissenizin her hafta yuzde kac yukselmesini ongoruyorsunuz: ",yatirim[i].hisse_adi);
			scanf("%d",&yukselis[i]);
			for(j=0;j<zaman[i];j++)
			{
			 	yatirim[i].hisse_fiyati=((yatirim[i].hisse_fiyati*(100+yukselis[i]))/100);
			}
			sonfiyat[i]=yatirim[i].hisse_fiyati;
			
		}
		for(i=0;i<kac_tane;i++)
		{
			netkar=sonfiyat[i]-ilkfiyat[i];
			printf("\n %s isimli hissenin %d hafta sonraki yeni degeri: %.2f, kar: %.2f, kar yuzdesi: %%%.2f\n\n",yatirim[i].hisse_adi,zaman[i],yatirim[i].hisse_fiyati,sonfiyat[i]-ilkfiyat[i],(netkar*100)/ilkfiyat[i]);
		} 
		
		break;
		
	}
	else if(islemm==2)
	{
			for(i=0;i<kac_tane;i++)
		{
			printf("%s isimli hisseyi kac ay  elinizdde tutacaksiniz: ",yatirim[i].hisse_adi);
			scanf("%d",&zaman[i]);
			printf("\n\n %s isimli hissenizin her ay yuzde kac yukselmesini ongoruyorsunuz: ",yatirim[i].hisse_adi);
			scanf("%d",&yukselis[i]);
			for(j=0;j<zaman[i];j++)
			{
			 	yatirim[i].hisse_fiyati=((yatirim[i].hisse_fiyati*(100+yukselis[i]))/100);
			}
			sonfiyat[i]=yatirim[i].hisse_fiyati;
			
		}
		for(i=0;i<kac_tane;i++)
		{
			netkar=sonfiyat[i]-ilkfiyat[i];
			printf("\n %s isimli hissenin %d ay sonraki yeni degeri: %.2f, kar: %.2f, kar yuzdesi: %%%.2f\n\n",yatirim[i].hisse_adi,zaman[i],yatirim[i].hisse_fiyati,sonfiyat[i]-ilkfiyat[i],(netkar*100)/ilkfiyat[i]);
		}
		
		break;
	}
		
	else if(islemm==3)
	{
			for(i=0;i<kac_tane;i++)
		{
			printf("%s isimli hisseyi kac yil  elinizdde tutacaksiniz: ",yatirim[i].hisse_adi);
			scanf("%d",&zaman[i]);
			printf("\n\n %s isimli hissenizin her yil yuzde kac yukselmesini ongoruyorsunuz: ",yatirim[i].hisse_adi);
			scanf("%d",&yukselis[i]);
			for(j=0;j<zaman[i];j++)
			{
			 	yatirim[i].hisse_fiyati=((yatirim[i].hisse_fiyati*(100+yukselis[i]))/100);
			}
			sonfiyat[i]=yatirim[i].hisse_fiyati;
			
		}
		for(i=0;i<kac_tane;i++)
		{
			netkar=sonfiyat[i]-ilkfiyat[i];
			printf("\n %s isimli hissenin %d yil sonraki yeni degeri: %.2f, kar: %.2f,kar yuzdesi: %%%.2f\n\n",yatirim[i].hisse_adi,zaman[i],yatirim[i].hisse_fiyati,sonfiyat[i]-ilkfiyat[i],(netkar*100)/ilkfiyat[i]);
		}
		
		break;
	}
	else
	{
		printf("gecerli bir islem numası giriniz:");
	}
	
	}
	
	char dosya_adresi[200];
	
	printf("verilerin portfoy dosyası olarak kaydedilmesi icin bir dosya yolu giriniz: ");
	printf("ornek: C:/Users/LENOVO/OneDrive gibi kendi bilgisayarininza gore yazabilirsiniz: ");
	scanf("%s",dosya_adresi);
	
	FILE *dosya1;
	
    dosya1=fopen(dosya_adresi,"w");
	if(dosya1==NULL)
	{
		printf("gecerli bir dosya yolu giriniz");
	}
	else
	{ 
		if(islemm==1)
		{
			float netkar;
		
			for(i=0;i<kac_tane;i++)
			{
				netkar=sonfiyat[i]-ilkfiyat[i];
				fprintf(dosya1,"%s isimli hissenin %d hafta sonraki yeni degeri: %.2f, kar: %.2f, kar yuzdesi: %%%.2f\n",yatirim[i].hisse_adi,zaman[i],yatirim[i].hisse_fiyati,netkar,(netkar*100)/ilkfiyat[i]);
				
			}
		}
		else if(islemm==2)
		{
			float netkar;
			for(i=0;i<kac_tane;i++)
			{
				netkar=sonfiyat[i]-ilkfiyat[i];
				fprintf(dosya1,"%s isimli hissenin %d ay sonraki yeni degeri: %.2f, kar: %.2f, kar yuzdesi: %%%.2f\n",yatirim[i].hisse_adi,zaman[i],yatirim[i].hisse_fiyati,netkar,(netkar*100)/ilkfiyat[i]);
				
			}
		}
		else if(islemm==3)
		{
			
			for(i=0;i<kac_tane;i++)
			{
				netkar=sonfiyat[i]-ilkfiyat[i];
				fprintf(dosya1,"%s isimli hissenin %d yil sonraki yeni degeri: %.2f, kar: %.2f, kar yuzdesi: %%%.2f\n",yatirim[i].hisse_adi,zaman[i],yatirim[i].hisse_fiyati,netkar,(netkar*100)/ilkfiyat[i]);
				
			}
		}
		
		
	}
	
	
	
		
}

}
